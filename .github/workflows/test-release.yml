name: Test Release Actions

on:
  push:
    tags: ["*"]
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  release-patch-cc:
    runs-on: ubuntu-latest
    name: Test Release Patch CC
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Run release patch actions
        uses: ./release-patch
        with:
          github-user: foo
          github-user-mail: foo@bar.baz
          github-user-token: bar
          gpg-key: boo
          gpg-passphrase: foo
          gpg-fingerprint: baz
  release-patch:
    runs-on: ubuntu-latest
    name: Test Release Patch
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Run release patch actions
        uses: ./release-patch
        with:
          github-user: foo
          github-user-mail: foo@bar.baz
          github-user-token: bar
          gpg-key: boo
          gpg-passphrase: foo
          gpg-fingerprint: baz
          conventional-commits: false
  patch-test-secret-encrypted:
    runs-on: ubuntu-latest
    name: Test Release Patch
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Run release patch actions
        uses: ./release-patch
        with:
          github-user: ${{ secrets.GREENBONE_BOT }}
          github-user-mail: foo@bar.baz
          github-user-token: bar
          gpg-key: boo
          gpg-passphrase: foo
          gpg-fingerprint: baz
          conventional-commits: false